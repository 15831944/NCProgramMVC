@model IEnumerable<NCProgramMVC.Models.Servizi>

@{
    ViewBag.Title = "Index";
}
<div class="container body-content">

    <h2 class="text-center">Servizi</h2>
    <hr class="hrl" />

    <p>
        <a href="@Url.Action("Create", "Servizis")" class="btn btn-primary"><span class="badge">@ViewBag.ServiziCount</span> Nuovo</a>

    </p>
    <table class="table table-responsive">
        <thead>
            <tr>
                <th></th>
                <th></th>
                <th>Img</th>
                <th>
                    @Html.DisplayNameFor(model => model.Servizio)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Descrizione)
                </th>
            </tr>

        </thead>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                        <button class="btn btn-success" type="button" data-toggle="collapse" data-target="#@item.Servizio_Id" aria-expanded="false" aria-controls="@item.Servizio_Id">
                            <span class="fa fa-chevron-down"> <strong>@item.Servizis.Count()</strong></span>
                        </button>
                </td>
                <td>
                    <a class="btn btn-primary" href="@Url.Action("Edit", "Servizis", new { id = @item.Servizio_Id})"><span class="fa fa-pencil"></span></a>
                    @if (@item.Servizis.Count() == 0)
                    {
                        <a class="btn btn-danger btn-xs" href="@Url.Action("Delete", "Servizis", new { id = @item.Servizio_Id})"><span class="fa fa-remove"></span></a>
                    }

                </td>
                <td>
                    <a href="@Url.Action("EditImg", "Servizis", new {id = @item.Servizio_Id })">
                        <img src="@Url.Content("~/Content/Immagini/Servizi/" + @item.Servizio_Id + ".png" )" class="img-servizio-sm" />
                    </a>

                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Servizio)
                    <!---Area collapse per dettaglio servizi-->
                    <div class="collapse" id="@item.Servizio_Id">
                        <a class="btn btn-warning btn-sm" href="@Url.Action("Create", "ServiziDetts", new { servizio = @item.Servizio_Id})">Nuovo <span class="fa fa-plus"></span></a>
                        <table class="table table-hover well">
                            @foreach (var item1 in item.Servizis)
                            {
                                <tr>
                                    <td>
                                        <a class="btn btn-primary" href="@Url.Action("Edit", "ServiziDetts", new { id = @item1.ServizoDett_Id})"><span class="fa fa-pencil "></span></a>
                                        <a class="btn btn-danger btn-xs" href="@Url.Action("Delete", "ServiziDetts", new { id = @item1.ServizoDett_Id})"><span class="fa fa-remove "></span></a>
                                        @item1.ServizioDett


                                    </td>
                                </tr>
                            }
                        </table>
                    </div>
               </td>
                <td>
                    @Html.Raw(item.Descrizione)
                </td>
            </tr>
        }

    </table>
</div>